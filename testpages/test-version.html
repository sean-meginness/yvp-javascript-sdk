<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>test-version</title>
</head>
<body data-youversionplatformkey='IiotL64yrkUgWkMorSy6srHFVrO17YoiyCSnpY3cRprKKk6R'>
    <script type="module">
        import BibleVersion from '/src/bible-version.js';
        import BibleReference from '/src/bible-reference.js';

        function assert(a, b) {
            if (a !== b) {
                console.error('Not equal: ', a, b);
                throw new Error('Assertion failed');
            }
        }

        function test_version_simple(version) {
            assert(version.metadata.id, 111);
            assert(version.abbreviation, 'NIV');
            assert(version.bookName('GEN'), 'Genesis');
            assert(version.bookName('JHN'), 'John');
            assert(version.numberOfChaptersInBook('GEN'), 50);
            assert(version.numberOfChaptersInBook('MAT'), 28);
            assert(version.chapterLabels('GEN')[0], '1');
            assert(version.chapterLabels('MAT')[27], '28');
            assert(version.format(new BibleReference(111, 'GEN', 1, 1)), 'Genesis 1:1');
            assert(version.formatWithVersion(new BibleReference(111, 'GEN', 1, 1)), 'Genesis 1:1 NIV');
            assert(version.format(new BibleReference(111, 'GEN', 2, 1)), 'Genesis 2:1');
            assert(version.format(new BibleReference(111, 'GEN', 3, 0)), 'Genesis 3');
            assert(version.format(new BibleReference(111, 'GEN', 2, 1, 2, 5)), 'Genesis 2:1-5');
            assert(version.format(new BibleReference(111, 'GEN', 2, 1, 3, 5)), 'Genesis 2:1-3:5');
            assert(version.shareUrl(new BibleReference(111, 'GEN', 4, 7)), 'https://www.bible.com/bible/111/GEN.4.7.NIV');
            console.log('test_version_simple: PASS');
        }

        const version = new BibleVersion(111);
        version.loadMetadata().then(metadata => {
            window.v = version;
            test_version_simple(version);
        });
      </script>
    </body>
</html>
